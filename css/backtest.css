:root {
  --bg-color: #1a1a1a;
  --surface-color: #2b2b2b;
  --primary-color: #00aaff;
  --text-color: #e0e0e0;
  --text-muted-color: #888;
  --green: #26a69a;
  --red: #ef5350;
  --border-color: #444;
}
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; background-color: var(--bg-color); color: var(--text-color); }
.backtest-container { display: flex; width: 100%; height: calc(100vh - 52px); margin-top: 52px; }
.control-panel { width: 320px; background-color: var(--surface-color); padding: 20px; border-right: 1px solid var(--border-color); overflow-y: auto; display: flex; flex-direction: column; }

.main-content { 
  flex-grow: 1; 
  padding: 20px; 
  overflow-y: auto; 
  display: flex; 
  flex-direction: column; 
  /* THE FIX: This prevents the flex item from expanding infinitely */
  min-height: 0; 
}

h1, h2, h3 { margin-top: 0; color: var(--text-color); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
h1 { font-size: 1.5em; }
h2 { font-size: 1.2em; margin-top: 20px; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; font-size: 0.9em; color: var(--text-muted-color);}
.form-group input, .form-group select, .textarea { width: 100%; padding: 10px; background-color: var(--bg-color); border: 1px solid var(--border-color); color: var(--text-color); border-radius: 4px; box-sizing: border-box;}
.run-button { width: 100%; padding: 12px; background-color: var(--primary-color); color: white; border: none; border-radius: 4px; font-size: 1.1em; cursor: pointer; transition: background-color 0.2s; margin-top: auto;}
.run-button:hover { background-color: #0088cc; }
.results-dashboard { display: flex; flex-direction: column; gap: 20px; }
.kpi-scorecard { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
.kpi-card { background-color: var(--surface-color); padding: 15px; border-radius: 5px; border-left: 4px solid var(--primary-color);}
.kpi-card .label { font-size: 0.9em; color: var(--text-muted-color); margin-bottom: 5px; }
.kpi-card .value { font-size: 1.4em; font-weight: bold; }
.kpi-card .value.positive { color: var(--green); }
.kpi-card .value.negative { color: var(--red); }
.chart-container { background-color: var(--surface-color); padding: 20px; border-radius: 5px; }
.trade-log-container { background-color: var(--surface-color); padding: 20px; border-radius: 5px; }
.trade-log-table { width: 100%; border-collapse: collapse; font-size: 0.9em;}
.trade-log-table th, .trade-log-table td { padding: 10px; text-align: left; border-bottom: 1px solid var(--border-color);}
.trade-log-table th { color: var(--text-muted-color); font-weight: bold;}
.trade-log-table tr:last-child td { border-bottom: none; }
.pnl-positive { color: var(--green); }
.pnl-negative { color: var(--red); }
@media (max-width: 900px) {
  .backtest-container { flex-direction: column; height: auto;}
  .control-panel { width: 100%; height: auto; border-right: none; border-bottom: 1px solid var(--border-color);}
  .main-content { height: auto; min-height: unset; /* Unset the fix for mobile view */ }
  .run-button { margin-top: 20px;}
}
.modal { display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; z-index:1000;}
.modal.is-active { display:flex; align-items:center; justify-content:center; }
.modal-background { position:absolute; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7);}
.modal-content { position:relative; background:var(--surface-color); border-radius:8px; padding:2em; max-width: 600px; width: 90%; }
.modal-close { position:absolute; top:1em; right:1em; background:none; border:none; font-size:2em; color:var(--text-color); cursor: pointer;}
.navbar.is-fixed-top { background-color: var(--surface-color); border-bottom: 1px solid var(--border-color); }
.navbar-item, .navbar-link { color: var(--text-color) !important; background-color: transparent !important; }
.navbar-item:hover, .navbar-link:hover { background-color: var(--bg-color) !important; color: var(--primary-color) !important; }
.navbar-item.is-active { background-color: var(--bg-color) !important; color: var(--primary-color) !important; font-weight: bold; }
.navbar-brand .navbar-item strong { color: var(--text-color); }
.navbar-burger span { background-color: var(--text-color) !important; }
.navbar-menu { background-color: var(--surface-color); }
.navbar-end .button.is-light { background-color: var(--bg-color); color: var(--text-color); }
.navbar-end .button.is-light:hover { background-color: #4a4a4a; }